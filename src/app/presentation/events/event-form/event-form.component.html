<!-- src/app/presentation/events/event-form/event-form.component.html -->
<div class="event-form-container">
    <header class="page-header">
      <div class="container">
        <!-- Dynamically set title based on whether editing or creating -->
        <h1>Create New Event</h1>
        <p>Fill in the details below to create a new event.</p>
      </div>
    </header>
  
    <div class="container">
      <div class="form-card card">
        <form [formGroup]="eventForm" (ngSubmit)="onSubmit()" novalidate>
  
          <!-- Title -->
          <div class="form-group">
            <label for="title">Event Title <span class="required">*</span></label>
            <input type="text" id="title" formControlName="title" placeholder="e.g., Annual Tech Conference">
            <div *ngIf="title?.invalid && (title?.dirty || title?.touched)" class="validation-error">
              <small *ngIf="title?.errors?.['required']">Title is required.</small>
              <small *ngIf="title?.errors?.['minlength']">Title must be at least 3 characters long.</small>
            </div>
          </div>
  
          <!-- Description -->
          <div class="form-group">
            <label for="description">Description <span class="required">*</span></label>
            <textarea id="description" formControlName="description" rows="4" placeholder="Provide details about the event..."></textarea>
             <div *ngIf="description?.invalid && (description?.dirty || description?.touched)" class="validation-error">
              <small *ngIf="description?.errors?.['required']">Description is required.</small>
              <small *ngIf="description?.errors?.['maxlength']">Description cannot exceed 500 characters.</small>
            </div>
          </div>
  
          <!-- Start Date & Time -->
          <div class="form-row">
            <div class="form-group half-width">
              <label for="startDate">Start Date <span class="required">*</span></label>
              <input type="date" id="startDate" formControlName="startDate">
               <div *ngIf="startDate?.invalid && (startDate?.dirty || startDate?.touched)" class="validation-error">
                 <small *ngIf="startDate?.errors?.['required']">Start date is required.</small>
               </div>
            </div>
            <div class="form-group half-width">
              <label for="startTime">Start Time <span class="required">*</span></label>
              <input type="time" id="startTime" formControlName="startTime">
               <div *ngIf="startTime?.invalid && (startTime?.dirty || startTime?.touched)" class="validation-error">
                 <small *ngIf="startTime?.errors?.['required']">Start time is required.</small>
               </div>
            </div>
          </div>
  
          <!-- End Date & Time -->
          <div class="form-row">
            <div class="form-group half-width">
              <label for="endDate">End Date <span class="required">*</span></label>
              <input type="date" id="endDate" formControlName="endDate">
               <div *ngIf="endDate?.invalid && (endDate?.dirty || endDate?.touched)" class="validation-error">
                 <small *ngIf="endDate?.errors?.['required']">End date is required.</small>
               </div>
            </div>
            <div class="form-group half-width">
              <label for="endTime">End Time <span class="required">*</span></label>
              <input type="time" id="endTime" formControlName="endTime">
               <div *ngIf="endTime?.invalid && (endTime?.dirty || endTime?.touched)" class="validation-error">
                 <small *ngIf="endTime?.errors?.['required']">End time is required.</small>
               </div>
            </div>
          </div>
           <!-- Global Date Validation Error -->
           <div *ngIf="eventForm.errors?.['endDateBeforeStartDate'] && (endDate?.touched || endTime?.touched)" class="validation-error form-wide-error">
             <small>End date and time must be after the start date and time.</small>
           </div>
  
  
          <!-- Type -->
          <div class="form-group">
            <label for="type">Event Type <span class="required">*</span></label>
            <select id="type" formControlName="type">
              <option *ngFor="let eventType of eventTypes" [value]="eventType">{{ eventType | titlecase }}</option>
            </select>
             <div *ngIf="type?.invalid && (type?.dirty || type?.touched)" class="validation-error">
               <small *ngIf="type?.errors?.['required']">Event type is required.</small>
             </div>
          </div>
  
          <!-- Location -->
          <div class="form-group">
            <label for="location">Location</label>
            <input type="text" id="location" formControlName="location" placeholder="e.g., Conference Hall A, Online">
            <!-- Add validation if location becomes required -->
          </div>
  
          <!-- Attendees -->
          <div class="form-group">
            <label for="attendees">Expected Attendees <span class="required">*</span></label>
            <input type="number" id="attendees" formControlName="attendees" min="0">
             <div *ngIf="attendees?.invalid && (attendees?.dirty || attendees?.touched)" class="validation-error">
              <small *ngIf="attendees?.errors?.['required']">Number of attendees is required.</small>
              <small *ngIf="attendees?.errors?.['min']">Attendees cannot be negative.</small>
            </div>
          </div>
  
          <!-- Status -->
          <div class="form-group">
            <label for="status">Status <span class="required">*</span></label>
            <select id="status" formControlName="status">
               <option *ngFor="let stat of eventStatuses" [value]="stat">{{ stat | titlecase }}</option>
            </select>
             <div *ngIf="status?.invalid && (status?.dirty || status?.touched)" class="validation-error">
               <small *ngIf="status?.errors?.['required']">Status is required.</small>
             </div>
          </div>
  
          <!-- Error Message Display -->
          <div *ngIf="errorMessage" class="alert alert-error">
            {{ errorMessage }}
          </div>
  
          <!-- Form Actions -->
          <div class="form-actions">
            <button type="button" class="btn-secondary" (click)="onCancel()">Cancel</button>
            <button type="submit" class="btn-primary" [disabled]="eventForm.invalid || isSubmitting">
              <span *ngIf="!isSubmitting">Create Event</span>
              <span *ngIf="isSubmitting">
                <span class="loading-spinner small"></span> Saving...
              </span>
            </button>
          </div>
  
        </form>
      </div>
    </div>
  </div>
  
